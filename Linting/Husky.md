> [!Определение]
> Husky предназначен для прогона каких либо действий (чаще всего линтеры) перед коммитом


## Порядок установки

```shell
npx husky init
```

Появится папка  .husky, внутри которой будет pre-commit

В данный файл необходимо положить комманды, которые исполняться перед коммитом, если что-то упадет с ошибкой, то коммит не отправится в историю

Пример заполнения файла:

```
npm run build:prod
npm run lint:ts
npm run lint:scss
npm run test:unit
```

Раньше husky не работал в помощнике git vscode (source control), сейчас заработал

Если вы склонировали  проект, где есть husky, то необходимо прогнать 

```shell
npm run prepare
```

```json
"scripts": {
    "prepare": "husky"
  },
```

### Проверка только индексированных файлов (файлы которые летят в коммит)

Для решения такой задачи подойдёт библиотека `lint-staged`

1) Устанавливаем её в devDependencies
2) В package.json прописываем
```json 
"lint-staged": {
    "**/*.{ts,tsx}": "eslint"
  },
```
3) В `.pre-commit` прописываем:
```bash
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
npx lint-staged
```

Теперь при отправке коммита будут проверяться только измененные файлы, по тем правилам, которые были указаны в п.2


